Apply mcuboot.patch to the zephyr project copy of mcuboot.
For example ~/zephyrproject/bootloader/mcuboot

Build and flash the mcuboot image:
> cd bootloader/mcuboot/boot/zephyr
> west build -p always -b nrf5340dk/nrf5340/cpuapp    #<- change for cat5340
> west flash

Also note if you don't want bootloader uart, change CONFIG_UART_CONSOLE in
the patched bootloader/mcuboot/boot/zephyr/prj.conf

To prepare an image for flashing via mcuboot DFU:
> cd zephyrapp
> # Change --version value to whatever is appropriate
> imgtool create --header-size 0x200 --align 8 --version 0.1 --slot-size 0xF0000 --pad build/zephyr/zephyr.bin build/zephyr/zephyr.bin.img

Signing is disabled in the mcuboot config, this just does sha256 hash for
integrity check and adds image metadata.

Now you can flash zephyr.bin.img with dfu-util:
> dfu-util --reset --download build/zephyr/zephyr.bin.img

Board should reboot (thanks to --reset) after flashing and boot the app image.

